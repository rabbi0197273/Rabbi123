<link rel="icon" href="drive-logo.png">
<style>
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

.plyr  {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* Skip feedback animation */
.skip-feedback {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 10px 20px;
  border-radius: 25px;
  font-size: 18px;
  font-weight: bold;
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.skip-feedback.show {
  opacity: 1;
}

/* Hide original progress bar */
.plyr__controls .plyr__progress {
  display: none !important;
}

/* YouTube-style progress bar above controls */
.custom-progress-bar {
  position: absolute;
  bottom: 100%;
  left: 0;
  right: 0;
  height: 4px;
  background: rgba(255, 255, 255, 0.3);
  z-index: 10;
  margin-bottom: 8px;
  cursor: pointer;
}

.custom-progress-bar:hover {
  height: 6px;
}

.custom-progress-buffer {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: rgba(255, 255, 255, 0.4);
  width: 0%;
  transition: width 0.1s ease;
}

.custom-progress-played {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: var(--plyr-color-main);
  width: 0%;
  transition: width 0.1s ease;
}

/* Custom large pause button */
.custom-large-button {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80px;
  height: 80px;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 999;
  transition: all 0.3s ease;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.custom-large-button.show {
  opacity: 1;
  visibility: visible;
  pointer-events: all;
}

.custom-large-button:hover {
  background: rgba(0, 0, 0, 0.9);
  transform: translate(-50%, -50%) scale(1.1);
}

.custom-large-button svg {
  width: 32px;
  height: 32px;
  fill: white;
}

/* Disable double click selection */
* {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
</style>
<title>DrivePlyr - Google Drive Proxy Video Player with Many Powerful HTML5 Players</title>
    
<!-- Meta Tags for SEO -->
<meta name="description" content="DrivePlyr is a Google Drive Proxy Video Player with Many Powerful HTML5 Players, Hidden ID, and Many Features. Play your videos from Google Drive with ease.">
<meta name="keywords" content="DrivePlyr, Google Drive, Proxy, Video Player, HTML5 Player, Hidden ID, Features">
<meta name="author" content="Rabbi123">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://rabbi0197273.github.io/Rabbi123/">
<meta property="og:title" content="DrivePlyr - Google Drive Proxy Video Player with Many Powerful HTML5 Players">
<meta property="og:description" content="DrivePlyr is a Google Drive Proxy Video Player with Many Powerful HTML5 Players, Hidden ID, and Many Features. Play your videos from Google Drive with ease.">
<meta property="og:image" content="https://sh20raj.github.io/DrivePlyr/drive-logo.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://rabbi0197273.github.io/Rabbi123/">
<meta property="twitter:title" content="DrivePlyr - Google Drive Proxy Video Player with Many Powerful HTML5 Players">
<meta property="twitter:description" content="DrivePlyr is a Google Drive Proxy Video Player with Many Powerful HTML5 Players, Hidden ID, and Many Features. Play your videos from Google Drive with ease.">
<meta property="twitter:image" content="https://sh20raj.github.io/DrivePlyr/drive-logo.png">

<!-- Other Meta Tags -->
<link rel="icon" href="https://raw.githubusercontent.com/SH20RAJ/DrivePlyr/main/drive-logo.png">
<meta name="theme-color" content="#ffffff">
<meta name="robots" content="index, follow">

<!-- Docs styles -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/CDNSFree2/Plyr/plyr.css" />

<!--Add a Simple HTML5 Video tag-->
<div id="container">
  <video controls poster="https://bit.ly/bbsampleposter" id="vid1">
    <!-- Video files -->
    <source src="https://rebrand.ly/sample-video" type="video/mp4" size="576" />
  </video>
  <!-- Custom large pause button -->
  <div id="custom-large-button" class="custom-large-button">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
    </svg>
  </div>
  <!-- Skip feedback overlay -->
  <div id="skip-feedback" class="skip-feedback"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/plyr/3.6.7/plyr.min.js"></script>

<script>
  var controls =
[
    'play-large', // The large play button in the center
    // 'restart', // Removed restart button as requested
    'rewind', // Rewind by the seek time (default 10 seconds)
    'play', // Play/pause playback
    'fast-forward', // Fast forward by the seek time (default 10 seconds)
    'progress', // The progress bar and scrubber for playback and buffering
    'current-time', // The current time of playback
    'duration', // The full duration of the media
    'mute', // Toggle mute
    'volume', // Volume control
    'captions', // Toggle captions
    'settings', // Settings menu
    'pip', // Picture-in-picture (currently Safari only)
    'airplay', // Airplay (currently Safari only)
    'fullscreen' // Keep fullscreen button
];

  const player = new Plyr('#vid1',{
    controls,
    seekTime: 10
  });

  // Custom pause button functionality
  const customButton = document.getElementById('custom-large-button');
  let hideTimeout;

  // Custom progress bar functionality
  let customProgressBar, customProgressPlayed, customProgressBuffer;

  // Disable only double-click for play/pause, keep fullscreen button working
  document.addEventListener('DOMContentLoaded', function() {
    // Disable double-click play/pause but allow fullscreen button clicks
    document.addEventListener('dblclick', function(e) {
      // Allow fullscreen button double-clicks
      if (e.target.closest('[data-plyr="fullscreen"]') || 
          e.target.closest('.plyr__control--fullscreen')) {
        return true;
      }
      e.preventDefault();
      e.stopImmediatePropagation();
      return false;
    }, true);
  });

  player.on('ready', function() {
    const video = document.querySelector('#vid1');
    const container = document.querySelector('#container');
    const wrapper = document.querySelector('.plyr');
    const controls = document.querySelector('.plyr__controls');
    
    // Create custom progress bar
    customProgressBar = document.createElement('div');
    customProgressBar.className = 'custom-progress-bar';
    
    customProgressBuffer = document.createElement('div');
    customProgressBuffer.className = 'custom-progress-buffer';
    
    customProgressPlayed = document.createElement('div');
    customProgressPlayed.className = 'custom-progress-played';
    
    customProgressBar.appendChild(customProgressBuffer);
    customProgressBar.appendChild(customProgressPlayed);
    controls.appendChild(customProgressBar);

    // Custom progress bar click handler
    customProgressBar.addEventListener('click', function(e) {
      const rect = customProgressBar.getBoundingClientRect();
      const percent = (e.clientX - rect.left) / rect.width;
      const newTime = percent * player.duration;
      player.currentTime = newTime;
    });
    
    // Disable double-click on video area only
    [video, container, wrapper].forEach(element => {
      if (element) {
        element.addEventListener('dblclick', function(e) {
          // Allow fullscreen button functionality
          if (e.target.closest('[data-plyr="fullscreen"]') || 
              e.target.closest('.plyr__control--fullscreen')) {
            return true;
          }
          e.preventDefault();
          e.stopImmediatePropagation();
          e.stopPropagation();
          return false;
        }, { capture: true, passive: false });
      }
    });

    // Single click handler for showing pause button
    video.addEventListener('click', function(e) {
      if (player.playing) {
        console.log('Video clicked while playing');
        showCustomButton();
      }
    });
    
    container.addEventListener('click', function(e) {
      // Ignore clicks on controls or progress bar
      if (e.target.closest('.plyr__controls') || 
          e.target.closest('.custom-progress-bar') ||
          e.target === customButton) {
        return;
      }
      
      if (player.playing) {
        console.log('Container clicked while playing');
        showCustomButton();
      }
    });
  });

  // Update custom progress bar
  player.on('timeupdate', function() {
    if (customProgressPlayed && player.duration) {
      const percent = (player.currentTime / player.duration) * 100;
      customProgressPlayed.style.width = percent + '%';
    }
  });

  player.on('progress', function() {
    if (customProgressBuffer && player.duration && player.buffered.length > 0) {
      const percent = (player.buffered.end(0) / player.duration) * 100;
      customProgressBuffer.style.width = percent + '%';
    }
  });

  // Custom button click handler
  customButton.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    console.log('Custom pause button clicked');
    player.pause();
    hideCustomButton();
  });

  function showCustomButton() {
    console.log('Showing custom button');
    customButton.classList.add('show');
    
    // Clear existing timeout
    if (hideTimeout) {
      clearTimeout(hideTimeout);
    }
    
    // Hide after 2 seconds
    hideTimeout = setTimeout(() => {
      hideCustomButton();
    }, 2000);
  }

  function hideCustomButton() {
    console.log('Hiding custom button');
    customButton.classList.remove('show');
    if (hideTimeout) {
      clearTimeout(hideTimeout);
    }
  }

  // Hide when paused or ended
  player.on('pause', function() {
    hideCustomButton();
  });

  player.on('ended', function() {
    hideCustomButton();
  });

  // Skip feedback function
  function showSkipFeedback(seconds) {
    const feedback = document.getElementById('skip-feedback');
    feedback.textContent = seconds > 0 ? `+${seconds}s` : `${seconds}s`;
    feedback.classList.add('show');
    setTimeout(() => {
      feedback.classList.remove('show');
    }, 1000);
  }

  // Keyboard shortcuts for skip functionality
  document.addEventListener('keydown', function(event) {
    if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {
      return;
    }
    
    switch(event.key) {
      case 'ArrowLeft':
        event.preventDefault();
        player.rewind(10);
        showSkipFeedback(-10);
        break;
      case 'ArrowRight':
        event.preventDefault();
        player.forward(10);
        showSkipFeedback(10);
        break;
      case ' ':
        event.preventDefault();
        if (player.playing) {
          player.pause();
        } else {
          player.play();
        }
        break;
    }
  });

  // Add event listeners for button clicks
  player.on('rewind', function() {
    showSkipFeedback(-10);
  });

  player.on('fastforward', function() {
    showSkipFeedback(10);
  });

  // Auto-Rotate on Fullscreen
  player.on('enterfullscreen', function () {
    if (screen.orientation && screen.orientation.lock) {
      screen.orientation.lock('landscape').catch(function (error) {
        console.warn('Orientation lock failed:', error);
      });
    }
  });

  player.on('exitfullscreen', function () {
    if (screen.orientation && screen.orientation.unlock) {
      screen.orientation.unlock();
    }
  });
</script>

<style>
  :root {
  --plyr-color-main: #e657ff;
    --plyr-video-control-color  :#e8ffba;
}
</style>

<script>
  var apikey = ['AIzaSyCt3DULzE2trDJhfFUosWZT-3GEObbMqVU', 'AIzaSyCsbx8BSyLwkw6XX6Lg5OF1U0HNtI9VmCY', 'AIzaSyBLMJAT6oqTZxAMsCjXzoo4lkJL4MmfM', 'AIzaSyCIY6fomcJxOt0XQ_naa1rzfd5wlOMGKDY'][Math.floor(Math.random() * 4)];
 console.log(apikey);
  function getparam(a,e){return e||(e=window.location.href),new URL(e).searchParams.get(a)}

  let video = document.getElementById('vid1');
  if(getparam('id')){
    let json = JSON.parse(atob(getparam('id'))) ;
    let driveid = json.id;
    video.src = `https://www.googleapis.com/drive/v3/files/${driveid }?alt=media&key=${apikey}`;
    video.poster = 'https://lh3.googleusercontent.com/d/'+driveid;
  }
</script>
