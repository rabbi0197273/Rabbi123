<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple Video Player</title>
  <meta name="description" content="A tiny, Google‑style simple HTML5 video player." />
  <meta name="robots" content="index,follow" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%23000'/%3E%3Cpolygon points='40,30 75,50 40,70' fill='%23fff'/%3E%3C/svg%3E" />
  <style>
    :root {
      --bg: #0b0b0c;       /* near-black like Google players */
      --fg: #e8e8ea;       /* light text */
      --border: #222326;   /* soft border */
      --accent: #2d6cdf;   /* subtle blue */
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; background: var(--bg); color: var(--fg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    }
    .wrap {
      max-width: 960px; margin: 0 auto; padding: 12px; display: grid; gap: 12px;
    }
    header { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
    header h1 { font-size: 16px; font-weight: 600; margin: 0; opacity: .9 }
    .controls { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
    .controls input[type="text"] { width: min(520px, 100%); }
    .controls input[type="text"], .controls button, .controls select, .controls label {
      background: #121316; color: var(--fg); border: 1px solid var(--border); border-radius: 10px;
      padding: 8px 10px; font-size: 14px; outline: none;
    }
    .controls button:hover { border-color: var(--accent); }

    .player {
      position: relative; border-radius: 14px; overflow: hidden; border: 1px solid var(--border);
      background: #000; aspect-ratio: 16/9; display: grid; place-items: center;
    }
    video { width: 100%; height: 100%; display: block; background: #000; }

    .hint { font-size: 12px; opacity: .7; }
    .row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .spacer { flex: 1 1 auto; }

    /* minimal look for default controls (when supported) */
    video::-webkit-media-controls { filter: saturate(0.9) brightness(0.95); }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Simple Video Player</h1>
      <div class="row hint">Use a direct video URL or a Google Drive file ID.</div>
    </header>

    <div class="controls">
      <input id="srcInput" type="text" placeholder="Paste video URL…  e.g. https://example.com/video.mp4" />
      <input id="idInput" type="text" placeholder="Or Google Drive File ID… (e.g. 1AbCDeFG...)" />
      <button id="loadBtn" title="Load into player">Load</button>
      <label class="row" for="fileInput" style="cursor:pointer">Open file<input id="fileInput" type="file" accept="video/*" style="display:none"></label>
      <div class="spacer"></div>
      <label class="row" title="Playback speed">
        Speed
        <select id="rate">
          <option value="0.5">0.5×</option>
          <option value="0.75">0.75×</option>
          <option value="1" selected>1×</option>
          <option value="1.25">1.25×</option>
          <option value="1.5">1.5×</option>
          <option value="1.75">1.75×</option>
          <option value="2">2×</option>
        </select>
      </label>
    </div>

    <div class="player">
      <video id="player" controls playsinline preload="metadata" poster="" controlsList="nodownload noplaybackrate">
        Sorry, your browser doesn’t support the video tag.
      </video>
    </div>

    <div class="hint">
      URL params supported: <code>?src=&lt;direct video url&gt;</code> or <code>?id=&lt;google drive file id&gt;</code>.
      For Google Drive, the file must be shared publicly or to "Anyone with the link".
    </div>
  </div>

  <script>
    const $ = (sel) => document.querySelector(sel);
    const player = $('#player');
    const srcInput = $('#srcInput');
    const idInput = $('#idInput');
    const rate = $('#rate');

    function getParam(key) { return new URL(location.href).searchParams.get(key); }

    function driveUrlFromId(id) {
      // No API key needed; works for files shared to "Anyone with the link"
      // Google serves a redirect to the actual file; the video tag will follow it.
      return `https://drive.google.com/uc?export=download&id=${encodeURIComponent(id)}`;
    }

    function setPosterFromId(id) {
      // Use Google thumbnail server for a lightweight poster (works for many files)
      player.poster = `https://lh3.googleusercontent.com/d/${encodeURIComponent(id)}`;
    }

    function loadSource(url, posterId) {
      player.src = url;
      if (posterId) setPosterFromId(posterId);
      player.playbackRate = Number(rate.value) || 1;
      player.load();
    }

    // Wire controls
    $('#loadBtn').addEventListener('click', () => {
      const src = srcInput.value.trim();
      const id = idInput.value.trim();
      if (id) {
        loadSource(driveUrlFromId(id), id);
      } else if (src) {
        loadSource(src);
      } else {
        alert('Paste a direct video URL or enter a Google Drive File ID.');
      }
    });

    $('#fileInput').addEventListener('change', (e) => {
      const file = e.target.files && e.target.files[0];
      if (!file) return;
      const url = URL.createObjectURL(file);
      player.poster = '';
      loadSource(url);
    });

    rate.addEventListener('change', () => {
      player.playbackRate = Number(rate.value) || 1;
    });

    // Auto-load from URL params
    (function initFromParams(){
      const src = getParam('src');
      const id = getParam('id');
      if (id) {
        idInput.value = id;
        loadSource(driveUrlFromId(id), id);
      } else if (src) {
        srcInput.value = src;
        loadSource(src);
      }
    })();

    // Quality of life: spacebar toggles play/pause when focused anywhere
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space' && !/INPUT|TEXTAREA|SELECT/.test(document.activeElement.tagName)) {
        e.preventDefault();
        if (player.paused) player.play(); else player.pause();
      }
    });
  </script>
</body>
</html>
